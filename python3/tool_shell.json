[
  {
    "type": "function",
    "function": {
      "name": "execute_shell",
      "description": "Execute shell or Python commands in a secure Docker container (taskbox, Ubuntu/Debian environment with Python 3.12, C/C++ toolchain, and ccache). Supports persistent container for state retention across calls.",
      "parameters": {
        "type": "object",
        "properties": {
          "command": {
            "type": "string",
            "description": "The command to execute. For shell: any bash command. For Python: Python code (can be multi-line). Multiple commands can use semicolons or newlines."
          },
          "timeout": {
            "type": "integer",
            "description": "Maximum execution time in seconds. Default is 60 seconds.",
            "default": 60
          },
          "working_dir": {
            "type": "string",
            "description": "Working directory inside the container (mapped to host sandbox). Default is /sandbox.",
            "default": "/sandbox"
          },
          "enable_network": {
            "type": "boolean",
            "description": "Allow external network access. Default is false.",
            "default": false
          },
          "language": {
            "type": "string",
            "description": "Language environment. 'shell' for bash commands, 'python' for Python code. Other languages may be added later.",
            "enum": ["shell", "python"],
            "default": "shell"
          },
          "libraries": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of libraries/packages to install before execution. For shell: apt packages (e.g., ['curl', 'jq']). For Python: pip packages (e.g., ['numpy', 'pandas'])."
          },
          "persistent": {
            "type": "boolean",
            "description": "Whether to use a persistent container that retains state (installed packages, files, etc.) across calls. Default is true. If false, a new temporary container is used for each command. If enable_network is false, persistent container is not used.",
            "default": true
          }
        },
        "required": ["command"]
      }
    }
  }
]
